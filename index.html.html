
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>åŒ—æµ·å­¦åœ’æœ­å¹Œé«˜æ ¡ çƒæŠ€å¤§ä¼š</title>
  <meta name="description" content="åŒ—æµ·å­¦åœ’æœ­å¹Œé«˜æ ¡ã®çƒæŠ€å¤§ä¼šå…¬å¼ãƒšãƒ¼ã‚¸ã€‚æ—¥ç¨‹ã€ç«¶æŠ€ç¨®ç›®ã€ä¼šå ´æ¡ˆå†…ã€ãŠçŸ¥ã‚‰ã›ã‚’æ²è¼‰ã€‚">
  <style>
    /* ï¼ˆå‰å›ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãã®ã¾ã¾è²¼ã‚Šä»˜ã‘ï¼‰ */
  </style>
</head>
<body>
  #mainæœ¬æ–‡ã¸ã‚¹ã‚­ãƒƒãƒ—</a>
  <div class="balls-layer" aria-hidden="true"></div>

  <header>
    <div class="brand" aria-label="ã‚µã‚¤ãƒˆã‚¿ã‚¤ãƒˆãƒ«">
      <div class="brand__mark" aria-hidden="true"></div>
      <div>
        <div style="opacity:.9;font-size:.9rem;" id="schoolName">åŒ—æµ·å­¦åœ’æœ­å¹Œé«˜æ ¡</div>
        <div style="font-size:1.05rem;" id="eventName">çƒæŠ€å¤§ä¼š</div>
      </div>
    </div>
    <nav aria-label="ä¸»è¦ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³">
      #newsãŠçŸ¥ã‚‰ã›</a>
      #scheduleã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</a>
      #sportsç«¶æŠ€ç¨®ç›®</a>
      #accessã‚¢ã‚¯ã‚»ã‚¹</a>
      #contactå•ã„åˆã‚ã›</a>
    </nav>
  </header>

  <section class="hero">
    <span class="eyebrow" id="tagline">SCHOOL SPORTS FESTIVAL</span>
    <h1 class="headline"><span id="heroTitle">åŒ—æµ·å­¦åœ’æœ­å¹Œé«˜æ ¡ <span style="color:var(--accent-gold)">çƒæŠ€å¤§ä¼š</span></span></h1>
    <p class="sub" id="heroSub">ä»²é–“ã¨å…¨åŠ›ã§ã€ç¬‘é¡”ã§ã€ãã—ã¦ãƒ•ã‚§ã‚¢ã«ã€‚<br>ä»Šå¹´ã‚‚ç†±ã„æˆ¦ã„ãŒã¯ã˜ã¾ã‚Šã¾ã™ï¼</p>
    <div class="cta">
      #scheduleâ° ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¦‹ã‚‹</a>
      #newsğŸ“£ æœ€æ–°ã®ãŠçŸ¥ã‚‰ã›</a>
    </div>
  </section>

  <main id="main">
    <section id="news" aria-labelledby="news-title">
      <div class="section__inner">
        <h2 class="section__title" id="news-title"><span class="spark">ãŠçŸ¥ã‚‰ã›</span></h2>
        <ul class="notice-list" id="noticeList"></ul>
      </div>
    </section>

    <section id="schedule" aria-labelledby="schedule-title">
      <div class="section__inner">
        <h2 class="section__title" id="schedule-title"><span class="spark">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</span></h2>
        <div style="overflow-x:auto;">
          <table class="schedule" role="table" aria-label="å½“æ—¥ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«">
            <thead><tr><th>æ™‚é–“</th><th>å†…å®¹</th><th>å ´æ‰€</th></tr></thead>
            <tbody id="scheduleTbody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="sports" aria-labelledby="sports-title">
      <div class="section__inner">
        <h2 class="section__title" id="sports-title"><span class="spark">ç«¶æŠ€ç¨®ç›®</span></h2>
        <div class="grid" id="sportsGrid"></div>
      </div>
    </section>

    <section id="access" aria-labelledby="access-title">
      <div class="section__inner">
        <h2 class="section__title" id="access-title"><span class="spark">ã‚¢ã‚¯ã‚»ã‚¹</span></h2>
        <div class="access">
          <div class="map" id="mapBox" role="img" aria-label="å­¦æ ¡å‘¨è¾ºã®åœ°å›³ï¼ˆå·®ã—æ›¿ãˆå¯èƒ½ï¼‰"></div>
          <div>
            <ul id="accessList">
              <li><strong>ä¼šå ´ï¼š</strong><span></span></li>
              <li><strong>æŒã¡ç‰©ï¼š</strong><span></span></li>
              <li><strong>æœè£…ï¼š</strong><span></span></li>
              <li><strong>æ³¨æ„ï¼š</strong><span></span></li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section id="contact" aria-labelledby="contact-title">
      <div class="section__inner">
        <h2 class="section__title" id="contact-title"><span class="spark">å•ã„åˆã‚ã›</span></h2>
        <p>è¡Œäº‹æ‹…å½“ï¼š<span id="dept">ç”Ÿå¾’æŒ‡å°éƒ¨ï¼ä½“è‚²ç§‘</span></p>
        <p>ä»£è¡¨ãƒ¡ãƒ¼ãƒ«ï¼š#contactEmail</a></p>
      </div>
    </section>
  </main>

  <footer>Â© <span id="year"></span> <span id="schoolFooter">åŒ—æµ·å­¦åœ’æœ­å¹Œé«˜æ ¡</span> çƒæŠ€å¤§ä¼š</footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // ä¸¸ã„ãƒœãƒ¼ãƒ«ï¼ˆå‰å›åŒæ§˜ï¼špalette, spawnBall ãªã©çœç•¥ãªãè²¼ã‚Šä»˜ã‘å¯ï¼‰
    (function balls(){
      const BALL_COUNT = 14, SIZE_MIN = 24, SIZE_MAX = 96, SPEED_MIN = 16, SPEED_MAX = 42, BOB_MIN = 8, BOB_MAX = 26;
      const palette = ["c-tennis","c-basket","c-soccer","c-volley","c-baseball","c-dodge"];
      const layer = document.querySelector('.balls-layer');
      const rand=(a,b)=>Math.random()*(b-a)+a, pick=arr=>arr[Math.floor(Math.random()*arr.length)];
      function spawn(){ const w=document.createElement('div'); w.className='ball';
        const c=document.createElement('div'); c.className='ball-core '+pick(palette);
        const size=Math.round(rand(SIZE_MIN,SIZE_MAX)); c.style.width=size+'px'; c.style.height=size+'px';
        w.style.top=rand(5,85)+'vh'; const d=rand(SPEED_MIN,SPEED_MAX);
        w.style.animationDuration=d+'s'; w.style.animationDelay=(-1*rand(0,d))+'s';
        const bob=Math.round(rand(BOB_MIN,BOB_MAX)); c.style.setProperty('--bob', bob+'px');
        c.style.animationDuration=rand(2.4,4.4)+'s'; c.style.animationDelay=rand(0,2)+'s';
        c.style.opacity=rand(0.6,1).toFixed(2); w.appendChild(c); layer.appendChild(w); }
      for(let i=0;i<BALL_COUNT;i++) spawn();
      setInterval(()=>{ if(document.hidden) return; const k=layer.children; if(!k.length) return; const t=k[Math.floor(Math.random()*k.length)];
        t.style.top=rand(5,85)+'vh'; t.style.animationDuration=rand(SPEED_MIN,SPEED_MAX)+'s'; }, 5000);
    })();

    // ===== JSON èª­ã¿è¾¼ã¿ â†’ åæ˜  =====
    async function loadData(){
      try{
        const res = await fetch('data.json', { cache: 'no-store' });
        if(!res.ok) throw new Error('data.jsonãŒèª­ã¿è¾¼ã‚ã¾ã›ã‚“: ' + res.status);
        const data = await res.json();
        applyData(data);
      }catch(e){
        console.error(e);
        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šæœ€å°é™ã®ãƒ‡ãƒ¼ã‚¿
        applyData({
          meta:{schoolName:'åŒ—æµ·å­¦åœ’æœ­å¹Œé«˜æ ¡',eventName:'çƒæŠ€å¤§ä¼š',tagline:'SCHOOL SPORTS FESTIVAL',heroTitleHTML:'åŒ—æµ·å­¦åœ’æœ­å¹Œé«˜æ ¡ <span style="color:var(--accent-gold)">çƒæŠ€å¤§ä¼š</span>',heroSubHTML:'ã‚ˆã†ã“ãï¼',footerSchool:'åŒ—æµ·å­¦åœ’æœ­å¹Œé«˜æ ¡'},
          colors:{navy:'#0C2340',gold:'#FFD84D',blue:'#43C1F2'},
          notices:[],schedule:[],sports:[],access:{mapHTML:'',itemsHTML:[] ,deptHTML:'',contactHTML:''},animation:{}
        });
      }
    }

    function setColorVar(name, val){
      if(!val) return;
      document.documentElement.style.setProperty(name, val);
    }

    function applyData(d){
      // è‰²
      setColorVar('--navy', d.colors?.navy);
      setColorVar('--accent-gold', d.colors?.gold);
      setColorVar('--accent-blue', d.colors?.blue);

      // ãƒ†ã‚­ã‚¹ãƒˆ/HTML
      const setHTML=(id, html)=>{ const el=document.getElementById(id); if(el && html!=null) el.innerHTML = html; };
      const setText=(id, text)=>{ const el=document.getElementById(id); if(el && text!=null) el.textContent = text; };

      setText('schoolName', d.meta?.schoolName);
      setText('eventName', d.meta?.eventName);
      setHTML('tagline', d.meta?.tagline);
      setHTML('heroTitle', d.meta?.heroTitleHTML);
      setHTML('heroSub', d.meta?.heroSubHTML);
      setText('schoolFooter', d.meta?.footerSchool);

      // ãŠçŸ¥ã‚‰ã›
      const noticeList = document.getElementById('noticeList');
      noticeList.innerHTML = '';
      (d.notices||[]).forEach(n=>{
        const li = document.createElement('li'); li.className = 'notice-item';
        li.innerHTML = `
          <span class="badge">${n.badge||''}</span>
          <div>
            <strong>${n.titleHTML||''}</strong><br>
            <time datetime="${n.datetime||''}">${n.dateText||''}</time>
            <span class="muted">${n.bodyHTML||''}</span>
          </div>`;
        noticeList.appendChild(li);
      });

      // ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
      const tbody = document.getElementById('scheduleTbody');
      tbody.innerHTML = '';
      (d.schedule||[]).forEach(r=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${r.timeHTML||''}</td>
          <td>${r.contentHTML||''}</td>
          <td>${r.placeHTML||''}</td>`;
        tbody.appendChild(tr);
      });

      // ç«¶æŠ€
      const grid = document.getElementById('sportsGrid');
      grid.innerHTML = '';
      (d.sports||[]).forEach(s=>{
        const card = document.createElement('div'); card.className='card';
        card.innerHTML = `
          <div class="emoji" aria-hidden="true">${s.emoji||'ğŸ€'}</div>
          <div>
            <strong>${s.nameHTML||''}</strong>
            <div class="muted" style="font-size:.95rem;">${s.venueHTML||''}</div>
          </div>`;
        grid.appendChild(card);
      });

      // ã‚¢ã‚¯ã‚»ã‚¹
      const mapBox = document.getElementById('mapBox');
      mapBox.innerHTML = d.access?.mapHTML || '';
      const spans = document.querySelectorAll('#accessList li span');
      (d.access?.itemsHTML||[]).forEach((txt,i)=>{ if(spans[i]) spans[i].innerHTML = txt; });
      const dept = document.getElementById('dept'); if(dept) dept.innerHTML = d.access?.deptHTML || '';
      const contact = document.querySelector('#contact p:last-of-type'); if(contact) contact.innerHTML = 'ä»£è¡¨ãƒ¡ãƒ¼ãƒ«ï¼š' + (d.access?.contactHTML||'');

      // ã‚¢ãƒ‹ãƒ¡ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã“ã“ã§ä½¿ã†å ´åˆã¯ã€ä¸Šã®balls()ã‚’data.animationã®å€¤ã§åˆæœŸåŒ–ã™ã‚‹ã‚ˆã†æ”¹ä¿®å¯
    }

    loadData();
  </script>
</body>
</html>
